<#-- WARNING : be careful to white-space and lines break in FreeMarker macros.
 # This macro template can be used to output white-space-sensitive formats (like RSS files).
 # See http://dev.lutece.paris.fr/jira/browse/LUTECE-765
-->

<#include "util/calendar/macro_datepicker.html"  ignore_missing=true />
<#-- Do not remove this comment -->

<#-- Information about this commons file -->
<#macro commonsFile>commons_bs4.html</#macro>
<#macro commonsName>Commons Bootstrap 4.3</#macro>
<#macro commonsDescription>Freemarker Commons macros powered by Bootstrap CSS Framework 4.3</#macro>

<#macro coreAdminCSSLinks>
<link href="css/admin/style/bootstrap4/bootstrap.min.css" rel="stylesheet"> <!-- Bootstrap 4.3.1 -->
<link href="css/admin/style/bootstrap4/bootstrap-colorpicker.min.css" rel="stylesheet">
<link href="css/admin/style/bootstrap4/bootstrap-datepicker.min.css" rel="stylesheet">
<link href="css/admin/style/bootstrap4/all.min.css" rel="stylesheet"> <!-- Font-Awesome 5.8.1 -->
<link href="css/admin/style/bootstrap4/portal_admin.css" rel="stylesheet">
</#macro>

<#macro coreAdminJSLinks>
<script src="css/admin/style/bootstrap4/bootstrap.bundle.min.js"></script> <!-- Bootstrap 4.3.1 -->
<script src="css/admin/style/bootstrap4/bootstrap-colorpicker.min.js"></script> 
<script src="css/admin/style/bootstrap4/bootstrap-datepicker.min.js"></script> 
<!-- <script src="css/admin/style/bootstrap4/portal_admin.js"></script>  -->
</#macro>

<#global gClassActive='active' />


<#-- PAGINATION  -->
<#macro pagination paginator >
<#assign nbLinkPagesToDisplay = 10 />
<#assign offsetPrev = nbLinkPagesToDisplay / 2 />
<#assign offsetNext = nbLinkPagesToDisplay / 2 />
<#if ( paginator.pageCurrent <= nbLinkPagesToDisplay - offsetPrev )>
	<#assign offsetPrev = paginator.pageCurrent - 1 />
	<#assign offsetNext = nbLinkPagesToDisplay - offsetPrev />
<#elseif ( paginator.pageCurrent + offsetNext > paginator.pagesCount )>
	<#assign offsetNext = paginator.pagesCount - paginator.pageCurrent />
	<#assign offsetPrev = nbLinkPagesToDisplay - offsetNext />
</#if>

<#if ( paginator.pagesCount > 1 )>
	<#if ( paginator.pageCurrent - offsetPrev > 1 )>
		<a href="${paginator.firstPageLink?xhtml}">
			<i class="fa fa-angle-double-left"></i> #i18n{portal.util.labelFirst}
		</a>
	</#if>
	<#if ( paginator.pageCurrent > 1 )>
		<a href="${paginator.previousPageLink?xhtml}">
			<i class="fa fa-angle-left"></i> #i18n{portal.util.labelPrevious}
		</a>
	<#else>
	</#if>
	<#if ( paginator.pageCurrent - offsetPrev > 1 )>
		<strong>...</strong>
	</#if>
	<#list paginator.pagesLinks as link>
		<#if link.index == paginator.pageCurrent>
			<strong>${link.name}</strong>
		<#else>
			<a href="${link.url?xhtml}">${link.name}</a>
		</#if>
	</#list>
	<#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
		<strong>...</strong>
	</#if>
	<#if ( paginator.pageCurrent < paginator.pagesCount )>
		<a href="${paginator.nextPageLink?xhtml}">
			<i class="fa fa-angle-right"></i>&nbsp;#i18n{portal.util.labelNext}
		</a>
		<#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
			<a href="${paginator.lastPageLink?xhtml}">
				<i class="fa fa-angle-double-right"></i>&nbsp;#i18n{portal.util.labelLast}
			</a>
		</#if>
	<#else>
		&nbsp;&nbsp;
	</#if>
</#if>
</#macro>

<#-- PAGINATION ADMIN -->
<#macro paginationAdmin paginator combo=0 form=1 nb_items_per_page=nb_items_per_page showcount=1 showall=0>
<#if (paginator.pagesCount > 1) >
	<@paginationPageLinks paginator=paginator />
</#if>
<div class="pull-right">
	<#if form == 1 >
		<form method="post" class="form-inline">
	</#if>
	<@paginationItemCount paginator=paginator combo=combo nb_items_per_page=nb_items_per_page showcount=showcount showall=showall/>
	<#if form == 1 >
		</form>
	</#if>
</div>
</#macro>

<#-- PAGINATION LINKS -->
<#macro paginationPageLinks paginator >
<#assign nbLinkPagesToDisplay = 10 />
<#assign offsetPrev = nbLinkPagesToDisplay / 2 />
<#assign offsetNext = nbLinkPagesToDisplay / 2 />
<#if ( paginator.pageCurrent <= nbLinkPagesToDisplay - offsetPrev )>
	<#assign offsetPrev = paginator.pageCurrent - 1 />
	<#assign offsetNext = nbLinkPagesToDisplay - offsetPrev />
<#elseif ( paginator.pageCurrent + offsetNext > paginator.pagesCount )>
	<#assign offsetNext = paginator.pagesCount - paginator.pageCurrent />
	<#assign offsetPrev = nbLinkPagesToDisplay - offsetNext />
</#if>
<ul class="pagination pagination-sm">
<#if ( paginator.pageCurrent - offsetPrev > 1 )>
	<li>
		<a href="${paginator.firstPageLink?xhtml}">
			${paginator.labelFirst}
		</a>
	</li>
</#if>
<#if (paginator.pageCurrent > 1) >
	<li class="previous">
		<a href="${paginator.previousPageLink?xhtml}">
			${paginator.labelPrevious}
		</a>
	</li>
<#else>
	<li class="disabled">
		<a href="${paginator.firstPageLink?xhtml}">${paginator.labelPrevious}</a>
	</li>
</#if>
<#if ( paginator.pageCurrent - offsetPrev > 1 )>
	<li>
		<a href="${(paginator.pagesLinks?first).url?xhtml}"><strong>...</strong></a>
	</li>
</#if>
<#list paginator.pagesLinks as link>
	<#if ( link.index == paginator.pageCurrent )>
		<li class="active">
			<a href="${link.url?xhtml}">${link.name}</a>
		</li>
	<#else>
		<li>
			<a href="${link.url?xhtml}">${link.name}</a>
		</li>
	</#if>
</#list>
<#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
	<li>
		<a href="${(paginator.pagesLinks?last).url?xhtml}"><strong>...</strong></a>
	</li>
</#if>
<#if (paginator.pageCurrent < paginator.pagesCount) >
	<li class="next">
		<a href="${paginator.nextPageLink?xhtml}">
			${paginator.labelNext}
		</a>
	</li>
	<#if ( paginator.pageCurrent + offsetNext < paginator.pagesCount )>
		<li class="next">
			<a href="${paginator.lastPageLink?xhtml}">
				${paginator.labelLast}
			</a>
		</li>
	</#if>
<#else>
	<li class="disabled">
		<a href="${paginator.lastPageLink?xhtml}">${paginator.labelNext}</a>
	</li>
</#if>
</ul>
</#macro>

<#-- PAGINATION COMBO -->
<#macro paginationCombo paginator nb_items_per_page=nb_items_per_page showall=0>
<label>${paginator.labelItemCountPerPage}</label>
<div class="input-group">
	<select data-max-item="${paginator.itemsCount}" class="input-xs" name="${paginator.itemsPerPageParameterName}" id="${paginator.itemsPerPageParameterName}" title="${paginator.labelItemCountPerPage}">
  		<#list [ "10" , "20" , "50" , "100" ] as nb>
  			<#if nb_items_per_page = nb >
  				<option selected="selected" value="${nb}">${nb}</option>
  			<#else>
  				<option value="${nb}">${nb}</option>
  			</#if>
  		</#list>
  		<#if showall ==1>
  			<#if paginator.itemsCount &gt; 100 >
  				<option <#if nb_items_per_page?number = paginator.itemsCount?number >selected="selected"</#if> value="${paginator.itemsCount}" class="${nb_items_per_page}">#i18n{portal.util.labelAll}</option>
  			</#if>
  		</#if>
	</select>
	<span class="input-group-btn">
		<button class="btn btn-default btn-xs" type="submit" title="#i18n{portal.util.labelRefresh}">
			<i class="fa fa-repeat"></i>
		</button>
	</span>
</div>
</#macro>

<#-- PAGINATION COUNT -->
<#macro paginationItemCount paginator combo=0 nb_items_per_page=nb_items_per_page showcount=1 showall=0>
<#-- Display combo -->
<#if combo == 1 >
  <@paginationCombo paginator=paginator nb_items_per_page=nb_items_per_page showall=showall />
</#if>
<#-- Display item count -->
<#if showcount == 1 >
<span class="showcount">
	<#if (paginator.labelItemCount)?? && paginator.labelItemCount?has_content>&nbsp;-&nbsp;${paginator.labelItemCount} : </#if> ${paginator.itemsCount}
</span>
</#if>
</#macro>

<#-- NAVIGATION -->
<#macro item_navigation item_navigator id="item-navigator">
<nav id="${id}" style="display:inline;">
<#if (item_navigator.currentItemId > 0)>
	<@aButton size='' href='${item_navigator.previousPageLink?xhtml}' title='#i18n{portal.util.labelPrevious}' buttonIcon='arrow-left' color='info' showTitleXs=false showTitleSm=false />
</#if>
<#if (item_navigator.currentItemId < item_navigator.listItemSize - 1) >
	<@aButton size='' href='${item_navigator.nextPageLink?xhtml}' title='#i18n{portal.util.labelNext}' buttonIcon='arrow-right' color='info' showTitleXs=false showTitleSm=false />
</#if>
</nav>
</#macro>

<#-- MESSAGES -->
<#macro messages errors=[] infos=[] warnings=[] errors_class="alert alert-danger" infos_class="alert alert-info" warnings_class="alert alert-warning">
<#if errors??>
	<#if errors?size &gt; 0 >
		<div class="alert alert-danger" id="messages_errors_div">
				<button class="close"></button>
				<#list errors as error >
						<span class="icon"><i class="fa fa-exclamation-circle"></i></span> ${error.message} <br>
				</#list>
		</div>
	</#if>
</#if>
<#if infos??>
	<#if infos?size &gt; 0 >
		<div class="alert alert-info" id="messages_infos_div" >
			<button class="close"></button>
			<#list infos as info >
				<span class="icon"><i class="fa fa-info-circle"></i></span> ${info.message} <br>
			</#list>
		</div>
	</#if>
</#if>
<#if warnings??>
	<#if warnings?size &gt; 0 >
		<div class="${warnings_class}" id="messages_warnings_div" >
			<a class="close" data-dismiss="alert" href="#">x</a>
			<#list warnings as warning >
				<span class="icon"><i class="fa fa-info-circle"></i></span> ${warning.message} <br>
			</#list>
		</div>
	</#if>
</#if>
</#macro>
	
<#-- TABLE -->
<#-- class:  -->
<#macro table responsive=true condensed=true hover=true striped=false bordered=false narrow=false class='' id='' params=''>

    <#assign tableClass=class />
    <#if condensed> <#assign tableClass=tableClass + ' table-condensed' /> </#if>
    <#if hover>     <#assign tableClass=tableClass + ' table-hover' /> </#if>
    <#if striped>   <#assign tableClass=tableClass + ' table-striped'   /> </#if>
    <#if bordered>  <#assign tableClass=tableClass + ' table-bordered'  /> </#if>
    <#if responsive>
    <div class="table-responsive">
    </#if>
        <table class="table ${tableClass}" id="${id}"<#if params!=''> ${params}</#if>>
            <#nested>
        </table>
    <#if responsive>
    </div>
    </#if>
</#macro>

<#-- MACRO TH -->
<#macro th class='' showXs=true showSm=true showMd=true showLg=true >
    <#assign thClass=class />
    <#if !showXs><#assign thClass=thClass + ' d-none d-sm-block'></#if>
    <#if !showSm><#assign thClass=thClass + ' d-none d-md-block'></#if>
    <#if !showMd><#assign thClass=thClass + ' d-none d-lg-block'></#if>
    <#if !showLg><#assign thClass=thClass + ' d-none d-xl-block'></#if>

    <th <#if thClass != ''>class="${thClass}"</#if>>
        <#nested>
    </th>
</#macro>


<#-- MACRO TR -->
<#macro tr>
<tr>
    <#nested>
</tr>
</#macro>

<#-- MACRO TD -->
<#macro td  showXs=true showSm=true showMd=true showLg=true xs=0 sm=0 md=0 lg=0 xl=0 class='' id='' params=''>
    <#assign tdClass=class />
    <#if !showXs><#assign tdClass=tdClass + ' d-none d-sm-block'></#if>
    <#if !showSm><#assign tdClass=tdClass + ' d-none d-md-block'></#if>
    <#if !showMd><#assign tdClass=tdClass + ' d-none d-lg-block'></#if>
    <#if !showLg><#assign tdClass=tdClass + ' d-none d-xl-block'></#if>

<td class="<#if tdClass != ''>${tdClass}</#if><#if xs!=0>col-xs-${xs}</#if><#if sm!=0> col-sm-${sm}</#if><#if md!=0> col-md-${md}</#if><#if lg!=0> col-lg-${lg}</#if><#if xl!=0> col-xl-${xl}</#if><#if class!=''>${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</td>
</#macro>


<#-- SORT -->
<#macro sort jsp_url attribute id="" >
<#if jsp_url?contains("?")>
	<#assign sort_url = jsp_url + "&amp;sorted_attribute_name=" + attribute + "&amp;asc_sort=" />
<#else>
	<#assign sort_url = jsp_url + "?sorted_attribute_name=" + attribute + "&amp;asc_sort=" />
</#if>
<div class="btn-group" role="group" aria-label="sortButton">
	<a class="btn btn-default btn-flat btn-xs" id="sort${id!}_${attribute!}" href="${sort_url}true#sort${id!}_${attribute!}" title="#i18n{portal.util.sort.asc}" >
		<i class="fa fa-chevron-up"></i>
	</a>
	<a class="btn btn-default btn-flat btn-xs" href="${sort_url}false#sort${id!}_${attribute!}" title="#i18n{portal.util.sort.desc}">
		<i class="fa fa-chevron-down"></i>
	</a>
</div>
</#macro>

<#-- ICONS -->
<#-- Icons from FontAwesome -->
<#macro icon prefix='fas fa-' style='' class='' title='' id='' params=''>
  <i class="${prefix}${style}<#if class!=''> ${class}</#if>" aria-hidden="true"<#if title!=''> title='${title}'</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>></i>
</#macro>

<#-- FORM -->
<#-- type: inline/horizontal/form -->
<#macro tform type='horizontal' class='' action='' method='post' name='' id='' role='form' params=''>
<#switch type>
    <#case 'horizontal'>
    <#assign typeClass = 'form-horizontal'>
    <#break>

    <#case 'inline'>
    <#assign typeClass = 'form-inline'>
    <#break>
    
    <#default>
    <#assign typeClass = 'form'>
</#switch>

<form class="${typeClass} ${class}"<#if id!=''> id="${id}"</#if><#if action!=''> action="${action}"</#if><#if method!=''> method="${method}"</#if><#if name!=''> name="${name}"</#if><#if role!=''> role="${role}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</form>
</#macro>


<#-- FORM ELEMENT STRUCTURE 												  								-->
<#-- formStyle values: horizontal/empty/inline Default is horizontal 	-->
<#-- class: 						 								-->
<#-- groupStyle: success/error -->
<#macro formGroup formStyle='horizontal' class='' groupStyle='' rows=1 labelKey='' labelFor='' labelId='' helpKey='' id='' mandatory=false showLabel=true params=''>
<#assign mandatory = mandatory>
<#assign labelFor = labelFor>
<#assign labelId = labelId>
<#assign labelKey = labelKey>
<#assign showLabel = showLabel>
<#assign helpKey = helpKey>
<#if groupStyle = "success">
	<#local validation = "is-valid">
<#elseif groupStyle="error">
	<#local validation = "is-invalid">
</#if>
<div class="<#if class!=''>${class}<#else>form-group<#if formStyle='horizontal'> row</#if><#if validation?? && validation!=''> ${validation}</#if></#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#if rows=1>
		<#if labelKey!='' && formStyle='horizontal'>
			<#assign labelClass = "col-sm-3 col-form-label">
			<#if showLabel=false>
				<#assign divClass="col">
			<#else>	
				<#assign divClass = "col-sm-9">
			</#if>
		<#elseif formStyle = 'inline'>
			<#assign labelClass = 'sr-only'>
			<#assign divClass = "mb-2 mr-sm-2">
		<#else>
				<#assign divClass="col-xs-12 offset-sm-3 col-sm-6">
		</#if>
	<#else>
		<#assign labelClass = "col-xs-12">
		<#assign divClass = "col-xs-12">
	</#if>
	<#assign labelClass = labelClass>
	<#if labelKey!=''>
		<@formLabel class=labelClass labelFor=labelFor labelId=labelId labelKey=labelKey showLabel=showLabel mandatory=mandatory />
	</#if>
	<#if formStyle !='inline'>
		<div class="${divClass}">
	</#if>
	<#nested>
	<#if helpKey!=''><small class="text-muted<#if formStyle!='inline'> form-text</#if>" <#if labelFor!=''>aria-describedby="${labelFor}"</#if>>${helpKey}</small></#if>
	<#if formStyle !='inline'>
		</div>
	</#if>
</div>
</#macro>

<#macro formField class=''>
<div class="form-row ${class}">
<#nested>
</div>
</#macro>

<#macro formLabel class='' labelFor='' labelId='' labelKey='' showLabel=true mandatory=true >
<label class="<#if showLabel=false>sr-only<#elseif class !=''>${class}</#if>" for="${labelFor}" <#if labelId!=''> id="${labelId}"</#if><#if mandatory=true>ariaLabel="${labelKey} [#i18n{portal.users.modify_attribute.labelMandatory}]"</#if>>${labelKey}</label>
</#macro>

<#macro formHelp style='inline' class='' labelFor=''>
<small class="text-muted<#if style!='inline'> form-text</#if><#if class!=''> ${class}</#if>" <#if labelFor!=''>aria-describedby="${labelFor}"</#if>>
<#nested>
</small>
</#macro>

<#-- INPUT TEXT/TEXTAREA/SEARCH/PASSWORD/EMAIL/FILE 																					-->
<#-- type : text/textarea/password/email/file/number. Default is text 												-->
<#-- size: input-xs/input-sm/input-lg 																												-->
<#-- incoming Bootstrap 4 size: form-control-sm/form-control-lg or empty for the normal size 	-->
<#-- pattern: [A-F][0-9]{5} 																																	-->
<#macro input name type='text' value='' class='' size='' inputSize=0 maxlength=0 placeHolder='' rows=4 cols=40 richtext=false tabIndex='' id='' disabled=false readonly=false pattern='' params='' title='' min=0 max=0>
	<#if type='textarea'>
		<textarea name="${name}" class="form-control<#if size!=''> input-${size}</#if><#if class!=''> ${class}</#if><#if richtext> richtext</#if>" rows="${rows}" cols="${cols}"<#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if placeHolder!=''> placeholder="${placeHolder}"</#if><#if title!=''> title="${title}"</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if><#if pattern!=''>pattern=${pattern}</#if><#if mandatory?? && mandatory && !richtext> required</#if><#if labelFor?? && labelFor!='' && helpKey?? && helpKey!=''> aria-describedby="${labelFor}_help"</#if>><#nested></textarea>
	<#elseif type='text' || type='search' || type='password' || type='email' || type='file' || type='number'>
		<input class="form-control<#if size!=''> input-${size}</#if><#if class!=''> ${class}</#if> " name="${name}" type="${type}" value="${value}"<#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if placeHolder!=''> placeholder="${placeHolder}<#if mandatory=true> [#i18n{portal.users.modify_attribute.labelMandatory}]</#if>"</#if><#if title!=''> title="${title}"</#if><#if maxlength &gt; 0> maxlength="${maxlength}"</#if><#if inputSize!=0> size="${inputSize}"</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if><#if pattern!=''>pattern=${pattern}</#if><#if min!=0> min="${min}"</#if><#if max!=0> max="${max}"</#if><#if mandatory?? && mandatory> required</#if><#if labelFor?? && labelFor!='' && helpKey?? && helpKey!=''> aria-describedby="${labelFor}_help"</#if> />
	<#elseif type='hidden'>
		<input type="hidden" name="${name}" value="${value}" />
	<#else>
		<@icon style='warning' /> Type not supported
	</#if>
</#macro>

<#-- STATIC TEXT 																																																					  -->
<#-- Bootstrap colors: primary/secondary/success/info/warning/danger/light/black/muted/white/text-black-50/text-white-50		-->
<#macro staticText inForm=true color='' id='' params=''>
<p class="<#if inForm>form-control-plaintext</#if><#if color!=''> text-${color}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</p>
</#macro>

<#--- MACRO SELECT (TO REPLACE "COMBO" MACROS) --->
<#macro select name items='' default_value="" id=name size='' sort=false multiple=0 params='' title='' tabIndex=0>
	<select id="${id}" name="${name}" class="form-control<#if size!=''> input-${size}</#if>" <#if (multiple &gt; 0)>multiple size="${multiple}"</#if><#if (tabIndex &gt; 0)> tabindex="${tabIndex}"</#if><#if params!=''> ${params}</#if><#if title!=''> ${title}</#if>>
	<#if items?has_content>
		<#if sort=true>
			<#list items?sort_by("name") as item>
				<#if default_value="${item.code}">
					<option selected="selected" value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
				<#else>
					<option value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
				</#if>
			</#list>
		<#else>
			<#list items as item>
				<#if default_value="${item.code}">
					<option selected="selected" value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
				<#else>
					<option value="${item.code}" <#if !item.name?has_content>label="${i18n("portal.util.labelEmpty")}"</#if>>${item.name}</option>
				</#if>
			</#list>
		</#if>
	<#else>
		<#nested>
	</#if>
	</select>
</#macro>

<#-- CHECKBOX 																							-->
<#-- orientation: vertical/horizontal. Default is vertical 	-->
<#-- TODO  																									-->
<#macro checkBox name id='' labelKey='' labelFor='' orientation='vertical' value='' tabIndex='' title='' disabled=false readonly=false checked=false params='' mandatory=false>
<#if orientation='vertical'>
<div class="checkbox">
</#if>
	<label<#if orientation='horizontal'> class="checkbox-inline"</#if><#if labelFor!=''> for="${labelFor}"</#if>>
	<input type="checkbox" id="${id}" name="${name}"<#if value!=''> value="${value}"</#if><#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if checked> checked</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if params!=''> ${params}</#if><#if mandatory> required</#if> />
		<#if labelKey!=''>
			${labelKey}
		<#else>
			&#160;
		</#if>
	</label>
<#if orientation='vertical'></div></#if>
</#macro>

<#-- RADIO BUTTON -->
<#-- orientation: vertical/horizontal. Default is vertical -->
<#macro radioButton name id='' value='' labelKey='' labelFor='' orientation='vertical' tabIndex='' title='' disabled=false readonly=false checked=false params=''>
	<#if orientation='vertical'>
		<div class="radio">
	</#if>
			<label<#if orientation='horizontal'> class="radio-inline"</#if>>
				<input type="radio" id="${id}" name="${name}"<#if value!=''> value="${value}"</#if><#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if checked> checked</#if><#if disabled> disabled</#if><#if readonly> readonly</#if><#if mandatory?? && mandatory> required</#if><#if params!=''> ${params}</#if> />
			<#if labelKey!=''>
					${labelKey}
			<#else>
					&#160;
			</#if>
			</label>
<#if orientation='vertical'></div></#if>
</#macro>


<#-- INPUT-GROUP -->
<#-- size: sm/lg/no size-->
<#macro inputGroup size='' class='' id='' params=''>
	<div class="input-group<#if size!=''> input-group-${size}</#if><#if class!=''> ${class}</#if>" <#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</div>
</#macro>

<#macro inputGroupItem pos='prepend' type='text' id='' params=''>
<#-- pos: append / prepend | Default append -->
<#-- type: text/input/btn . default is text	-->
<div class="input-group-${pos}">
	<#if type='text'>
		<span class="input-group-text"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
			<#nested>
		</span>
	<#elseif type='addon'>
		<span class="input-group-text"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
			<#nested>
		</span>
	<#elseif type='input'>
		<div class="input-group-text"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
			<#nested>
		</div>
	<#else>
		<#nested>
	</#if>	
</div>
</#macro>

<#-- DROPDOWN MENU -->
<#-- class: dropdown-menu-right -->
<#-- Expected content : <li><a>Your link here</a></li> -->
<#macro dropdownMenu class='' id='' params=''>
	<ul class="dropdown-menu ${class}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</ul>
</#macro>

<#-- ROW -->
<#macro row class='' id='' params=''>
	<div class="row<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</div>
</#macro>

<#-- COLUMNS -->
<#-- cols = col-xs- (<544px)/col-sm- (>=544px)/col-md- (>=768px)/col-lg- (>=992px)/col-xl- (>=1200px) -->
<#macro columns offsetXs=0 offsetSm=0 offsetMd=0 offsetLg=0 offsetXl=0 pushXs=0 pushSm=0 pushMd=0 pushLg=0 pushXl=0 pullXs=0 pullSm=0 pullMd=0 pullLg=0 pullXl=0 xs=12 sm=0 md=0 lg=0 xl=0 id='' class='' params=''>
<#if xs=12 && sm=0 && md=0 && lg=0 && xl=0>
<div class="col<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<#else>
<div class="col-xs-${xs}<#if sm!=0> col-sm-${sm}</#if><#if md!=0> col-md-${md}</#if><#if lg!=0> col-lg-${lg}</#if><#if xl!=0> col-xl-${xl}</#if><#if offsetXs!=0> col-xs-offset-${offsetXs}</#if><#if offsetSm!=0> col-sm-offset-${offsetSm}</#if><#if offsetMd!=0> col-md-offset-${offsetMd}</#if><#if offsetLg!=0> col-lg-offset-${offsetLg}</#if><#if offsetXl!=0> col-xl-offset-${offsetXl}</#if><#if pushXs!=0> col-xs-push-${pushXs}</#if><#if pushSm!=0> col-sm-push-${pushSm}</#if><#if pushMd!=0> col-md-push-${pushMd}</#if><#if pushLg!=0> col-lg-push-${pushLg}</#if><#if pushXl!=0> col-xl-push-${pushXl}</#if><#if pullXs!=0> col-xs-pull-${pullXs}</#if><#if pullSm!=0> col-sm-pull-${pullSm}</#if><#if pullMd!=0> col-md-pull-${pullMd}</#if><#if pullLg!=0> col-lg-pull-${pullLg}</#if><#if pullXl!=0> col-xl-pull-${pullXl}</#if><#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
</#if>
	<#nested>
</div>
</#macro>

<#-- LISTS -->
<#macro ul id='' params='' class=''>
	<ul<#if class!=''> class="${class}"</#if><#if params!=''> ${params}</#if><#if id!=''> ${id}</#if>>
		<#nested>
	</ul>
</#macro>

<#-- TABS -->

<#-- TAB Custom AdminLTE -->
<#macro tabs color='' id='' params=''>
	<div class="nav-tabs-custom<#if color!=''> ${color}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</div>
</#macro>

<#-- Bootstrap UL tabs -->
<#-- type: tabs/tabs nav-justified/pills/pills nav-stacked/pills nav-justified -->
<#macro listTabs type='tabs' id='' params=''>
		<ul class="nav nav-${type}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
			<#nested>
		</ul>
</#macro>

<#-- TAB Content AdminLTE -->
<#macro tabContent id='' params=''>
		<div class="tab-content"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
			<#nested>
		</div>
</#macro>


<#-- ACCORDION --> 
<#-- The accordionContainer is the container for accordionPanel, which itself is the container for accordionHeader and accordionBody -->
<#-- The childId argument in accordionPanel is meant to be used in the two sub-macros: accordionHeader and accordionBody -->
<#macro accordionContainer id='' params=''>
	<div class="box-group"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#assign parentId = id>
		<#nested>
	</div>
</#macro>

<#macro accordionPanel color='' collapsed=true childId='' id='' params=''>
	<div class="panel box box-${color}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
		<#if collapsed = true>
			<#assign aClass = 'collapsed'>
			<#assign expanded = 'false'>
			<#assign childClass = 'panel-collapse collapse'>
		<#else>
			<#assign aClass = ''>
			<#assign expanded = 'true'>
			<#assign childClass = 'panel-collapse collapse in'>
		</#if>
			<#assign childId = childId>
		<#nested>
	</div>
</#macro>

<#-- ACCORDION ELEMENT --> 
<#-- The boxTools parameter is unused, kept for backwards compatibility -->
<#macro accordionHeader title='' parentId=parentId childId=childId boxTools=false id='' params='' headerIcon='' >
<div class="box-header with-border"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<h2 class="box-title">
		<a class="${aClass}" data-toggle="collapse" data-parent="#${parentId}" href="#${childId}" aria-expanded="${expanded}">
             <#if headerIcon!=''><@icon style=headerIcon /></#if> &nbsp;
			${title}
		</a>
	</h2>
	<#local nested><#nested></#local>
	<#if nested?has_content>
	<div class="box-tools">
		${nested}
	</div>
	</#if>
</div>
</#macro>

<#macro accordionBody id=childId class=childClass expanded=expanded params=''>
<div id="${id}" class="${class}" aria-expanded="${expanded}"<#if params!=''> ${params}</#if>>
	<@boxBody>
		<#nested>
	</@boxBody>
</div>
</#macro>

<#macro progressBar description='' id='' params=''>
<div class="progress"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<div id="progressbar" class="progress-bar progress-bar-striped" role="progressbar">
		<div id="complexity">0%</div>
	</div>
</div>
<#if description!=''>
	<span class="progress-description">${description}</span>
</#if>
</#macro>

<#macro progress color='primary' id='' params='' value=0 min=0 max=100 text=''>
<div class="progress"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<div id="progressbar" class="progress-bar  bg-${color}" role="progressbar" style="width: ${value}%;" aria-valuenow="${value}" aria-valuemin="${min}" aria-valuemax="${max}">
        <#if text=''>${value}%<#else>${text}</#if>
	</div>
</div>
</#macro>



<#-- INFO-BOX AdminTLE (widget) -->
<#-- color: only for the left side showing the icon. -->
<#-- bgColor: for the right side containing the text -->
<#macro infoBox color='' boxText='' boxIcon='' boxNumber='' unit='' bgColor='' progressBar='' progressDescription='' id='' params=''>
<div class="info-box<#if bgColor!=''> ${bgColor}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<span class="info-box-icon<#if color!=''> ${color}</#if>"><@icon style=boxIcon /></span>
	<div class="info-box-content">
		<span class="info-box-text">${boxText}</span>
		<span class="info-box-number">${boxNumber?string(",000")}<#if unit!=''> <small>${unit}</small></#if></span>
		<#if bgColor!='' && progressBar!=''>
		<div class="progress">
			<div class="progress-bar" style="width: ${progressBar}%"></div>
		</div>
		</#if>
		<#if progressDescription!=''>
		<span class="progress-description">${progressDescription}</span>
		</#if>
	</div>
</div>
</#macro>

<#-- TAG -->
<#-- color: default/primary/success/info/warning/danger/ -->
<#macro tag color='default' size='' title='' tagIcon='' id='' params=''>
	<span class="badge badge-${color}"<#if title!=''> title='${title}'</#if><#if id!=''>id='${id}'</#if><#if params!=''>${params}</#if>>
        <#if tagIcon !=''>
            <@icon style=tagIcon />
        </#if>
		<#nested>
	</span>
</#macro>

<#-- BUTTON -->
<#-- bootstrap 3 : size: btn-xs/btn-sm/btn-lg -->
<#-- upcoming bootstrap 4 : size: btn-sm for small buttons/empty for medium buttons/btn-lg for large buttons -->
<#-- color: default[bootstrap4 : secondary]/primary/success/warning/danger/info -->
<#-- color (upcoming bootstrap 4): btn-outline-default/btn-outline-primary/btn-outline-success/btn-outline-warning/btn-outline-danger/btn-outline-info/ -->
<#-- style: btn-block/btn-flat/close/navbar-toggle/collapsed... -->
<#-- type: button/submit/reset -->
<#-- params: data-toggle/data-target/data-dismiss... -->
<#-- buttonIcon: icon name ex: info/check/comment/envelope... -->
<#-- iconPosition: left/right -->
<#-- cancel: switch to true for a cancellation form button. Adds the "formnovalidate" attribute to the button, as well as the right class -->
<#macro button name='' id='' type='button' size='' color='' style='' class='' params='' value='' title='' tabIndex='' showTitle=true showTitleXs=true showTitleSm=true showTitleMd=true showTitleLg=true buttonIcon='' disabled=false iconPosition='left' dropdownMenu=false cancel=false>
	<#if cancel>
		<#assign buttonColor = 'default' />
	<#elseif !cancel && color=''>
		<#assign buttonColor = 'primary' />
	<#else>
		<#assign buttonColor = color />
	</#if>
	<#if style='btn-box-tool'>
		<#assign style='text-right btn-link' />
	</#if>
	
	<#-- Visibility of button title -->
	<#assign showTitleClass = '' />
	<#if showTitle = false><#assign showTitleClass = 'sr-only' /></#if>
	<#if showTitleXs = false><#assign showTitleClass = showTitleClass + ' d-none d-sm-block' /></#if>
	<#if showTitleSm = false><#assign showTitleClass = showTitleClass + ' d-none d-md-block' /></#if>
	<#if showTitleMd = false><#assign showTitleClass = showTitleClass + ' d-none d-lg-bloc' /></#if>
	<#if showTitleLg = false><#assign showTitleClass = showTitleClass + ' d-none d-xl-block' /></#if>
	
	<#if dropdownMenu>
		<div class="dropdown">
	</#if>
	
	<button class="<#if style!='close'>btn</#if><#if size!='' && style!='btn-box-tool'> btn-${size}</#if><#if buttonColor!='' && style!='btn-box-tool'> btn-${buttonColor}</#if><#if style!=''> ${style}</#if><#if dropdownMenu> dropdown-toggle</#if><#if class!=''> ${class}</#if>" type="${type}"<#if title!=''> title="${title}"</#if><#if name!=''> name="${name}"</#if><#if id!=''> id="${id}"</#if><#if value!=''> value="${value}"</#if><#if params!=''> ${params}</#if><#if disabled> disabled</#if><#if dropdownMenu> data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"</#if><#if cancel> formnovalidate</#if>>
		<#if buttonIcon!='' && iconPosition='left'><@icon style=buttonIcon /></#if>
		<#if showTitleClass!='' && style!='btn-box-tool'><span class="${showTitleClass}"></#if>${title}<#if showTitleClass!='' && style!='btn-box-tool'></span></#if>
		<#if buttonIcon!='' && iconPosition='right'><@icon style=buttonIcon /></#if>
		<#if dropdownMenu>
		&#160;<@icon style='caret-down' />
		</#if>
	</button>
	
	<#if dropdownMenu>
		<ul class="dropdown-menu"<#if id!=''> aria-labelledby="${id}"</#if>>
			<#nested>
		</ul>
		</div>
	</#if>
</#macro>

<#-- A BUTTON (LINK STYLED AS A BUTTON) -->
<#-- size: btn-xs/btn-sm/btn-lg -->
<#-- color: default/primary/success/warning/danger/info/ -->
<#-- style: btn-block/btn-flat/disabled/btn-app -->
<#-- icon: icon name ex: info/check/comment/envelope... -->
<#macro aButton name='' id='' href='' size='' color='primary' style='btn' class='' params='' title='' tabIndex='' showTitle=true showTitleXs=true showTitleSm=true showTitleMd=true showTitleLg=true buttonIcon='' disabled=false iconPosition='left' dropdownMenu=false>
	<#-- Visibility of button title -->
	<#assign showTitleClass = '' />
	<#if showTitle = false><#assign showTitleClass = 'sr-only' /></#if>
	<#if showTitleXs = false><#assign showTitleClass = showTitleClass + ' d-none d-sm-block' /></#if>
	<#if showTitleSm = false><#assign showTitleClass = showTitleClass + ' d-none d-md-block' /></#if>
	<#if showTitleMd = false><#assign showTitleClass = showTitleClass + ' d-none d-lg-block' /></#if>
	<#if showTitleLg = false><#assign showTitleClass = showTitleClass + ' d-none d-xl-block' /></#if>
	
	<a class="${style} <#if size!=''> btn-${size}</#if><#if color!=''> btn-${color}</#if><#if class!=''> ${class}</#if>"<#if name!=''> name="${name}"</#if><#if id!=''> id="${id}"</#if> href="${href}" title="${title}"<#if params!=''> ${params}</#if><#if disabled> disabled</#if><#if dropdownMenu> data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"</#if>>
		<#if buttonIcon!='' && iconPosition='left'><@icon style=buttonIcon /></#if>
		<span class="${showTitleClass}">${title}</span>
		<#if buttonIcon!='' && iconPosition='right'><@icon style=buttonIcon /></#if>
		<#if dropdownMenu>
		&#160;<@icon style='caret-down' />
		</#if>
		<#nested>
	</a>
</#macro>

<#-- BTN TOOLBAR -->
<#macro btnToolbar id='' params='' ariaLabel=''>
<div class="btn-toolbar" role="toolbar"<#if ariaLabel!=''> aria-label="${ariaLabel}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#-- BTN GROUP -->
<#-- size: sm/empty/lg -->
<#-- align: left/center/right -->
<#macro btnGroup align='' size='' class='' id='' params='' ariaLabel=''>
<div class="btn-group<#if size!=''> btn-group-${size}</#if><#if class!=''> ${class}</#if> <#if align='right'>pull-right</#if>" role="group"<#if ariaLabel!=''> aria-label="${ariaLabel}"</#if><#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#-- Radio button/Checkbox as buttons (to use with btnGroup)  -->
<#-- type: radio/checkbox -->
<#macro btnGroupRadioCheckbox type='checkbox' color='primary' size='' name='' id='' params='' ariaLabel='' labelFor='' labelKey='' labelParams='' tabIndex='' value='' checked=false>
<label class="btn btn-${color}<#if size!=''> btn-${size}</#if>" for="${labelFor}"<#if labelParams!=''> ${labelParams}</#if>>
<input type="${type}" name="${name}" id="${id}" autocomplete="off"<#if value!=''> value="${value}"</#if><#if params!=''> ${params}</#if><#if tabIndex!=''> tabindex="${tabIndex}"</#if><#if checked> checked</#if> /><#if labelKey!=''>${labelKey}</#if>
</label>
</#macro>

<#-- Simple links a href -->
<#macro link href='' class='' id='' title='' params=''>
	<a href="${href}"<#if class!=''> class="${class}"</#if><#if id!=''> id="${id}"</#if><#if title!=''> title="${title}"</#if><#if params!=''> ${params}</#if>>
		<#nested>
	</a>
</#macro>

<#-- MODAL -->
<#-- bgColor: modal-default/modal-primary/modal-info/modal-warning/modal-danger -->
<#macro modal id params='' bgColor=''>
<div class="modal ${bgColor} fade" tabindex="-1" role="dialog" id="${id}" data-toggle="modal"<#if params!=''> ${params}</#if>>
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<#nested>
		</div>
	</div>
</div>
</#macro>

<#macro modalHeader titleLevel='h4' modalTitle='' id='' params=''>
<div class="modal-header"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<button type="button" class="close" data-dismiss="modal" aria-label="Close">
		<span aria-hidden="true">&times;</span>
	</button>
	<${titleLevel} class="modal-title">${modalTitle}</${titleLevel}>
</div>
</#macro>

<#macro modalBody id='' params=''>
<div class="modal-body"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#macro modalFooter id='' params=''>
<div class="modal-footer"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#-- BREADCRUMBS -->
<#macro breadcrumbs id='' params=''>
<ol class="breadcrumb"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</ol>
</#macro>

<#-- CALLOUT -->
<#-- AdminLTE classes: info/warning/danger/success -->
<#macro callOut color='' titleLevel='h3' title='' callOutIcon='' id='' params=''>
<div class="callout callout-${color}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#if title!=''><${titleLevel}><@icon style=callOutIcon /> ${title}</${titleLevel}></#if>
	<#nested>
</div>
</#macro>

<#-- ALERT -->
<#-- classes: alert-success/alert-info/alert-warning/alert-danger + alert-dismissible -->
<#-- color: primary/success/info/warning/dange r-->
<#macro alert class='' color='' titleLevel='h3' title='' iconTitle='' dismissible=false id='' params=''>
<div class="alert  ${class} <#if color!=''> alert-${color}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#if dismissible>
		<@button color='' size='' style='close' params='data-dismiss="alert" aria-hidden="true"'>
			&times;
		</@button>
	</#if>
	<#if title!=''>
	<${titleLevel}>
		<#if iconTitle!=''><@icon style=iconTitle /></#if>
		${title}
	</${titleLevel}>
	</#if>
	<#nested>
</div>
</#macro>


<#---------------------------------------------------------->
<#--  Card as Box 																				-->
<#-- color: default/primary/info/success/warning/danger 	-->
<#-- style: solid (no top border) 												-->
<#-- collapsed: true/false 																-->
<#---------------------------------------------------------->
<#macro box color='' id='' style='' class='' params='' collapsed=false>
<div class="card m-2 <#if color!=''> border-${color}</#if><#if style!=''> text-${style}</#if><#if class!=''> ${class}</#if><#if collapsed> collapsed-box</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#-- The boxTools parameter is unused, kept for backwards compatibility -->
<#macro boxHeader title='' i18nTitleKey='' showTitle=true id='' params='' boxTools=false titleLevel='h5'>
<div class="card-header"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
<${titleLevel} class="box-title<#if showTitle=false> sr-only</#if>"><#if title!=''>${title}</#if><#if i18nTitleKey!=''>#i18n{${i18nTitleKey}}</#if></${titleLevel}>
	<#local nested><#nested></#local>
	<#if nested?has_content>
	<div class="box-tools">
		<#nested>
	</div>
	</#if>
</div>
</#macro>

<#macro boxBody class='' id='' params=''>
<div class="card-body<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>

<#macro boxFooter class='' id='' params=''>
<div class="card-footer<#if class!=''> ${class}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</div>
</#macro>
<#---------------------------------------->

<#-- color: Bootstrap -->
<#-- unit: %,... -->
<#macro smallBox color='' title='' text='' boxIcon='' titleLevel='h5' unit='' url='' urlText='' id='' params='' fontSize='40px'>
<div class="card m-2 <#if color!=''> bg-${color}</#if>"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<div class="card-body">
		<#if url!=''>	<a class="card-link<#if color!=''> text-white</#if>" href="${url}"></#if>
		<${titleLevel} class="card-title"><@icon style=boxIcon /> 
		<#if unit!=''> ${unit}</#if></${titleLevel}>
		<#if url!=''></a></#if>
		<h3 class="card-text "> ${text} <span class="font-weight-bold">${title}</span></h3>
	</p>
	</div>
</div>
</#macro>

<#-- AdminLTE Error Page -->
<#-- Error Type: 500,404... -->
<#-- Color: primary/blue/navy/aqua/teal/green/orange/yellow/red/purple/maroon/gray/black... -->
<#macro errorPage color='' errorType='' id='' params=''>
<div class="error-page"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<h2 class="headline text-${color}">${errorType}</h2>
	<div class="error-content">
		<h3>
			<@icon style='warning' class='text-${color}' />
			<#if errorType=='404'>
				#i18n{portal.util.error404.title}
			<#elseif errorType='500'>
				#i18n{portal.util.error500.title}
			<#else>...
			</#if>
		</h3>
		<p>
			<#if errorType=='404'>
				#i18n{portal.util.error404.text} 
			<#elseif errorType='500'>
				#i18n{portal.util.error500.text} 
			<#else>...
			</#if>
		</p>
		<@aButton href='' size='' color='bg-${color}' style='btn-flat'>
			<@icon style='home' />
			#i18n{portal.util.labelBackHome}
		</@aButton>
	</div>
</div>
</#macro>

<#-- CONTEXTUAL BACKGROUND P-->
<#-- Bootstrap colors: primary/success/info/warning/danger -->
<#-- AdminTLE colors: gray/gray-light/black/red/yellow/aqua/blue/light-blue/green/navy/teal/olive/lime/orange/fuchsia/purple/maroon -->
<#macro coloredBg color='' type='p' id='' params=''>
<${type} class="bg-${color}"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</${type}>
</#macro>

<#macro listGroup id='' params=''>
<ul class="list-group"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#assign listElementClass = "list-group-item list-group-item-action">
	<#nested>
</ul>
</#macro>

<#macro unstyledList id='' params=''>
<ul class="unstyled"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#assign liClass = "margin">
	<#nested>
</ul>
</#macro>

<#-- DROPDOWN MENU LIST -->
<#macro dropdownList id='' params=''>
<ul class="dropdown-menu"<#if id!=''> id="${id}"</#if><#if params!=''> ${params}</#if>>
	<#nested>
</ul>
</#macro>

<#-- CARDS -->
<#macro card header=false headerTitle='' headerIcon=false headerTitleIcon=''>
<div class="panel panel-default">
	<#if header><div class="panel-heading"><#if headerIcon><@icon style='${headerTitleIcon}' />&#160;</#if>${headerTitle}</div></#if>
	<div class="panel-body">
		<#nested>
	</div>
</div>
</#macro>

<#-- -------------------------------------------------
-- MACRO ADMIN STRUCTURE - HEADER + NAVBAR + FOOTER -- 
-------------------------------------------------- -->
<#-- MACRO adminHeader -->
<#macro adminHeader site_name='SITE_NAME'>
<body class="d-flex flex-column vh-100">
	<div class="skipnav"><a href="#main">allez au contenu principal</a></div>
	<h1 id="top" class="sr-only sr-only-focusable">Haut de page</h1>
	<header class="main-header" role="banner">
		<!-- <nav class="navbar navbar-expand-md navbar-fixed-top bg-primary" role="navigation"> -->
	  <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
			<a class="navbar-brand" href="jsp/site/Portal.jsp" title="#i18n{portal.users.admin_header.title.viewSite} ${site_name}" target="_blank" >
				<img src="#dskey{portal.site.site_property.logo_url}" height="30" class="d-inline-block align-top" aria-hidden="true" title="#i18n{portal.users.admin_header.title.viewSite} ${site_name}" alt="${site_name}">
				<#if site_name?length &gt; 18> ${site_name?substring(0,16)}... <#else> ${site_name}</#if>
			</a>
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbar-collapse">
				<ul class="navbar-nav mr-auto">
				<#list feature_group_list as feature_group>
				  <#if feature_group.features?size &gt; 1>
					 	<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" id="dLabel${feature_group.id}Header" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" href="${admin_url}#${feature_group.id}">
								${feature_group.label}
							</a>
					   <div class="dropdown-menu" aria-labelledby="dLabel${feature_group.id}Header">
						 	<#list feature_group.features as feature>
								<#if !feature.externalFeature>
									<a class="dropdown-item" href="${feature.url}?plugin_name=${feature.pluginName}">${feature.name}</a>
								<#else>
									<a class="dropdown-item" href="${feature.url}">
										<#if feature.iconUrl?has_content><i class="${feature.iconUrl}"></i></#if> ${feature.name}
									</a>
								</#if>
						 	</#list>
							</div>
					 	</li>
				  <#else>
					 	<#list feature_group.features as feature>
					  	<li class="nav-item">
						  <#if !feature.externalFeature>
								<a class="nav-link" href="${feature.url}?plugin_name=${feature.pluginName}">${feature.name}</a>
						  <#else>
								<a class="nav-link" href="${feature.url}"><#if feature.iconUrl?has_content><i class="${feature.iconUrl}"></i></#if>${feature.name}</a>
						  </#if>
							</li>
					   </#list>
					 </#if>
			   </#list>
			  </ul>
			  <ul class="nav navbar-nav user">
					<li class="nav-item home">
						<a class="nav-link" href="${admin_url}" title="#i18n{portal.users.admin_header.homePage}">
							<i class="fas fa-home"></i>
						</a>
					</li>
                    <#if user.userLevel == 0>
                    <li class="nav-item home">
                        <a class="nav-link" href="jsp/admin/AdminTechnicalMenu.jsp" title="#i18n{portal.admindashboard.view_dashboards.title}">
                              <i class="fa fa-cog"></i>
                        </a>
                    </li>
                    </#if>
					<li class="nav-item dropdown user-menu">
						<a href="${admin_url}#user-menu" class="nav-link dropdown-toggle" data-toggle="dropdown" id="dLabelUserHeader">
							<#if adminAvatar> 
								<img src="servlet/plugins/adminavatar/avatar?id_user=${user.userId}" height="32px" class="d-inline-block align-top rounded" aria-hidden="true" alt="User's avatar"> 
							<#else> 
								<img src="#dskey{portal.site.site_property.avatar_default}" height="32px" class="d-inline-block align-top rounded-pill" aria-hidden="true"  alt="User's avatar"> 
							</#if>     
							${dashboard_zone_4!}
						</a>
						<div class="dropdown-menu"  role="menu" aria-labelledby="dLabelUserHeader">
							<#if userMenuItems?has_content>   
								<#list userMenuItems as item>
										${item.content}
								</#list>
							</#if>
						</div>
					</li>
					<#if admin_logout_url?has_content>
						<li class="nav-item">
							<a class="nav-link" href="${admin_logout_url}" title="#i18n{portal.users.admin_header.deconnectionLink}">
								<i class="fa fa-power-off fa-fw"></i>
							</a>
						</li>
					</#if>
		  </ul>
		</div>
	</nav>
</header>
<!-- Begin page content -->
<main role="main" class="flex-shrink-0">
 	<!-- Close in footer -->
</#macro>

<#-- MACRO adminFooter -->
<#macro adminFooter >
	<!-- end content section -->
</main>
<!-- footer menu -->
<footer class="footer mt-auto py-3">
	<div class="container">
		<nav id="footer" class="navbar navbar-default" role="navigation">
			<div class="navbar-text navbar-right">
				<a class="navbar-link" href="http://fr.lutece.paris.fr" target="lutece" title="#i18n{portal.site.portal_footer.labelPortal}">
					<img src="images/poweredby.png" alt="#i18n{portal.site.portal_footer.labelMadeBy}">
					<small>version ${version}</small>
				</a>
			</div>
		</nav>
	</div>
</footer>
<!-- Included JS Files -->
<!-- Le javascript
=============================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<@coreAdminJSLinks />
</#macro>

<#-- MACRO adminHome -->
<#macro adminHome >
<section class="dashboard-widgets">
<@row>
	<@columns class='widget'>
		${dashboard_zone_1!}
	</@columns>
	<@columns class='widget'>
		${dashboard_zone_2!}
	</@columns>
	<@columns class='widget'>
		${dashboard_zone_3!}
	</@columns>
</@row>
</section>
</#macro>

<#-- adminContentHeader  -->
<#macro adminContentHeader >
<header>
	<div class="row justify-content-between">
		<div class="col">
			<h3 class="ml-2">
				<a href="${feature_url}" title="${feature_title}">${feature_title}</a>
				<#if page_title?has_content><small>${page_title}</small></#if>
			</h3>
		</div>
		<@adminHeaderDocumentationLink />
	</div>
</header>
<section class="content <#if feature_url?ends_with('AdminSite.jsp')>no-padding</#if>">
</#macro>

<#-- adminLoginPage  -->
<#macro adminLoginPage title=''>
<img src="images/logo-header.png" class="fixed-top m-4" aria-hidden="true" title="LUTECE Back-Office" alt="LUTECE Back-Office">
<section id="login-page">
	<div class="container">
		<div class="row align-items-center vh-100">
			<div class="col-sm-5 offset-sm-3 bg-light rounded px-5">
				<header>
					<h1 class="h2 mb-3 text-center">
						<a class="btn btn-link btn-block " href="jsp/site/Portal.jsp" title="${site_name!'Lutece'}">#i18n{portal.admin.admin_login.welcome}<br> <b>${site_name!'Lutece'}</b></a>
					</h1>
					<h2 class="h3 mb-3 text-center">${title}</h2>
				</header>
				<main>
					<#nested>
				</main>
				<footer>
					<p class="text-center">
						<@aButton href='http://fr.lutece.paris.fr' params='target="_blank"' title='#i18n{portal.site.portal_footer.labelPortal}' showTitle=false color='link'>
						<img src="images/poweredby.png" class="thumbnails" alt="logo lutece" title="Lutece">
						</@aButton>
					</p>
				</footer>
				</div>	
		</div>
	</div>
</section>
<script>
$(function() {
	var randomImages = [#dskey{portal.site.site_property.back_images}];
	var rndNum = Math.floor(Math.random()*(randomImages.length));
	var bgImg = 'url(' + randomImages[rndNum] + ')';
	$("#login-page").css('background-image', bgImg );
});
</script>
</#macro>

<#-- adminHeaderDocumentationLink  -->
<#macro adminHeaderDocumentationLink >
  <#if feature_documentation?has_content >
		<#if feature_documentation?exists>
			<div class="col text-right">
				<a class="btn btn-link" target="_blank" href="${feature_documentation}" title="#i18n{portal.features.documentation.help} [Nouvelle fenêtre]">
					<@icon class="fa-life-ring" /> #i18n{portal.features.documentation.help}
				</a>
			</div>
		</#if>
	</#if>
</#macro>

<#macro adminSiteColumnOutline columnid=''>
<div class="admin_column_outline">
	<span class="admin_column_id">${i18n("portal.site.columnId",columnid)}</span>
	<div><#nested></div>
</div>
</#macro>

<#-- adminMessagePage  -->
<#macro adminMessagePage title=''>
<#assign title=title />
<#assign alerttype="secondary" />
<#assign icontype="fa-info-circle" />
<#if title??>
	<#if title?trim='' >
		<#assign title="Information" />
	</#if>		
</#if>		
<#if message.type == 2 >
	 <#assign alerttype="danger" />
   <#assign icontype="fa-question-circle" />
<#elseif message.type == 3 >
   <#assign alerttype="warning" />
   <#assign icontype="fa-exclamation-circle" />
<#elseif message.type == 4 >
	 <#assign alerttype="warning" />
   <#assign icontype="fa-question-circle" />
<#elseif message.type == 5 >
   <#assign alerttype="danger" />
   <#assign icontype="fa-ban" />
</#if>
<div class="container w-25">
	<div class="row justify-content-center align-items-center min-vh-100">
		<div class="col">
			<div class="alert alert-${alerttype} text-center" role="alert">
				<h1><span class="fas ${icontype}"></span> ${title!}</h1>
				${text!}
				<#nested>
				<p class="text-center">
					<img src="images/poweredby.png" class="thumbnails" alt="logo lutece" title="Lutece">
				</p>
			</div>	
		</div>
	</div>
</div>
</#macro>

<#-- fieldSet  -->
<#macro fieldSet legend=''>
<fieldset>
	<#if legend!=''>
		<legend>${legend}</legend>
	</#if>
	<#nested>
</fieldset>
</#macro>

<#--Badge : BS badge + label  -->
<#macro badge color='primary' badgeIcon='' title='' htmlEl='deprecated' type='deprecated' style='deprecated' class='deprecated' >
<span class="badge badge-${color}" <#if title != ''> title="${title}" </#if> >
    <#if badgeIcon !=''>
        <@icon style=badgeIcon />
    </#if>
	<#nested>
</span>
</#macro>



<#-- HELPERS --> 

<#-- FLOAT -->
<#-- Float right  -->
<#macro fright> pull-right</#macro>
<#-- Float left  -->
<#macro fright> pull-left</#macro>
<#-- Clearfix  -->
<#macro fright> clearfix</#macro>

<#-- RESPONSIVE -->

<#-- HTML ELEMENTS -->
<#macro img url='' alt='' title='' class='' id='' params=''> 
<img src="${url}" alt="${alt}" title="${title}" class="thumbnails thumb-list ${class}" id="${id}" ${params}>
</#macro>

<#-- Email Default Template -->
<#macro emailTemplate title='Lutece' footer_link='https://fr.lutece.paris.fr'> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width"/>
    <style type="text/css">
		* { margin: 0; padding: 0; font-size: 100%; font-family: 'Avenir Next', "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; line-height: 1.65; }
		img { max-width: 100%; margin: 0 auto; display: block; }
		body, .body-wrap { width: 100% !important; height: 100%; background: #f8f8f8; }
		a { color: #007bff; text-decoration: none; }
		a:hover { text-decoration: underline; }
		.text-center { text-align: center; }
		.text-right { text-align: right; }
		.text-left { text-align: left; }
		.button { display: inline-block; color: white; background: #007bff; border: solid #007bff; border-width: 10px 20px 8px; font-weight: bold; border-radius: 4px; }
		.button:hover { text-decoration: none; }
		h1, h2, h3, h4, h5, h6 { margin-bottom: 20px; line-height: 1.25; }
		h1 { font-size: 32px; }
		h2 { font-size: 28px; }
		h3 { font-size: 24px; }
		h4 { font-size: 20px; }
		h5 { font-size: 16px; }
		p, ul, ol { font-size: 16px; font-weight: normal; margin-bottom: 20px; }
		.container { display: block !important; clear: both !important; margin: 0 auto !important; max-width: 580px !important; }
		.container table { width: 100% !important; border-collapse: collapse; }
		.container .masthead { padding: 80px 0; background: #007bff; color: white; }
		.container .masthead h1 { margin: 0 auto !important; max-width: 90%; text-transform: uppercase; }
		.container .content { background: white; padding: 30px 35px; }
		.container .content.footer { background: none; }
		.container .content.footer p { margin-bottom: 0; color: #888; text-align: center; font-size: 14px; }
		.container .content.footer a { color: #888; text-decoration: none; font-weight: bold; }
		.container .content.footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
<table class="body-wrap">
	<tr>
		<td class="container">
				<!-- Message start -->
				<table>
						<tr>
							<td align="center" class="masthead">
								<h1>${title}</h1>
							</td>
						</tr>
						<tr>
							<td class="content">
								<#nested>
							</td>
						</tr>
				</table>
		</td>
	</tr>
	<tr>
		<td class="container">
			<!-- Message start -->
			<table>
					<tr>
						<td class="content footer" align="center">
								<p><a href="${footer_link}">Lutece</a></p>
						</td>
					</tr>
			</table>
		</td>
	</tr>
</table>
</body>
</html>		
</#macro>

<#macro adminLanguage languages lang action='jsp/admin/DoChangeLanguage.jsp' >
<@tform method='post' action=action class='form-inline'>
<input type="hidden" name="token" value="${token}">
<@row>
	<@columns class="mx-4">
		<@icon style='language' /> #i18n{portal.admin.admin_home.language}
	</@columns>
</@row>
<@row>
	<#list languages as language>
	<@columns>
		<#if lang=language.code>
			<#assign islocale='check-circle text-success pl-4'>
			<#assign title=' Selectionné '>
		<#else>
			<#assign islocale=''>
			<#assign title=''>
		</#if>
		<@button color='' class='${language.code}' type='submit' name='language' value='${language.code}' title='${language.name?capitalize}${title}' buttonIcon='${islocale}' showTitle=false />
	</@columns>
	</#list>
</@row>
</@tform>
</#macro>

<#macro adminAccessibilityMode>
<@tform method='post' action='jsp/admin/DoModifyAccessibilityMode.jsp' class="ml-2">
	<input type="hidden" name="token" value="${token}">
	<#if user.accessibilityMode>
		<@button color='link text-dark' size='md' type='submit' buttonIcon='eye' title='#i18n{portal.users.admin_header.labelDeactivateAccessibilityMode}'/>
	<#else>
		<@button color='link text-dark' size='md' type='submit' buttonIcon='eye-slash' title='#i18n{portal.users.admin_header.labelActivateAccessibilityMode}'/>
	</#if>
</@tform>
</#macro>

<#-- adminContentHeader  -->
<#macro adminContentHeader >
<section class="content-header">
	<h1>
        <#if feature_url?? >
            <a href="${feature_url}" title="${feature_title!''}">${feature_title!''}</a>
            <#else>
                ${feature_title!''}
            </#if>
		<#if page_title?has_content><small>${page_title}</small></#if>
	</h1>
	<@adminHeaderDocumentationLink />
</section>
<section class="content <#if feature_url?? && feature_url?ends_with('AdminSite.jsp')>no-padding</#if>">
</#macro>
