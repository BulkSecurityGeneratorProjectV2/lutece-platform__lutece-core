<@tabPanel id='autoincludes'>
<#assign tabTitle>#i18n{portal.templates.manage_autoincludes.pageTitle} </#assign>
<@pageHeader title="${tabTitle}" />
<#assign defaultThemeName='' >
<#list commons_list as item>
	<#if current_commons="${item.code}">
		<#assign defaultThemeName=item.name >
		<#break>
	</#if>
</#list>
<@messages infos=infos />
<@row>
	<@columns sm=12 md=6 lg=7>
		<@row>
			<@columns sm=12 md=6>
				<#assign boxTitle>#i18n{portal.templates.manage_autoincludes.commonsInfos} : <span class="text-primary"><@commonsName /></span></#assign>
				<@box>
					<@boxHeader title=boxTitle />
					<@boxBody>
						<@p>#i18n{portal.templates.manage_autoincludes.commonsFile} <br><strong><@commonsFile /></strong></@p>
						<@p>#i18n{portal.templates.manage_autoincludes.commonsDescription} <br><strong><@commonsDescription/></strong></@p>
					</@boxBody>
				</@box>
			</@columns>	
			<@columns sm=12 md=6 class='d-flex'>
				<@box class='flex-grow-1'>
					<@boxHeader title='#i18n{portal.templates.manage_autoincludes.commonsChange}' />
					<@boxBody>
						<@tform method='post' name='FilterPluginsForm' action='jsp/admin/templates/ManageAutoIncludes.jsp'>
						<@input type='hidden' name='action' value='activate' />
						<@formGroup labelKey='#i18n{portal.templates.manage_autoincludes.commonsAvailable}' labelFor='commons_key' class='has-addons' rows=2>
							<@inputGroup class=''>
								<@select sort=true name='commons_key' default_value='${current_commons}' items=commons_list params='addons' size='' />
								<@button type='submit' color='primary' buttonIcon='check' title='#i18n{portal.templates.manage_autoincludes.buttonSwitch}' hideTitle=['all'] size='' />
							</@inputGroup>
						</@formGroup>
						</@tform>
					</@boxBody>
				</@box>
			</@columns>	
		</@row>
		<@box>
			<@boxHeader title='#i18n{portal.templates.manage_autoincludes.title}' />
			<@boxBody>
				<@ul class='list-group'>
				<#list autoinclude_list as autoinclude >
					<@li class='list-group-item d-flex justify-content-between align-items-center text-truncate'>
						${autoinclude.filePath}
						<#if autoinclude.owner?? && defaultThemeName=autoinclude.owner  ><@tag>#i18n{portal.templates.manage_autoincludes.columnFilePath}</@tag></#if>
					</@li>
				</#list>
				</@ul>
			</@boxBody>
		</@box>
	</@columns>	
	<@columns sm=12 md=6 lg=5>
		<#assign preview><@commonsPreview /></#assign>
		<@div class='shadow-lg p-3 mb-5 bg-body-tertiary rounded'>
			<@img url='${preview?lower_case}' alt='Preview of theme' class='img-fluid' />
		</@div>
	</@columns>	
</@row>
</@tabPanel>