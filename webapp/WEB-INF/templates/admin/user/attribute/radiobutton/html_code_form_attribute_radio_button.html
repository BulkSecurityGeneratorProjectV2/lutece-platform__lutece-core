<#function isSelected nIdField default_values_list>
	<#if default_values_list?has_content>
		<#list default_values_list as default_value>
			<#if default_value.attributeField?exists && default_value.attributeField.idField = nIdField && default_value.value != "">  		
  				<#return true>
  			</#if>
  		</#list>
	</#if>
	<#return false>
</#function>
<#function hasElement default_values_list>
	<#if default_values_list?has_content>
		<#list default_values_list as default_value>
			<#if default_value.idUserField != 0>
				<#return true>
			</#if>
		</#list>
	</#if>
	<#return false>
</#function>
<#if attribute.mandatory>
	<#assign mandatory = true>
<#else>
	<#assign mandatory = false>
</#if>
<#if attribute.helpMessage?exists&&attribute.helpMessage!=''>
	<#assign helpKey = attribute.helpMessage>
</#if>

<@formGroup labelKey='${attribute.title?html}' rows=2 helpKey=helpKey mandatory=mandatory>
	<#if attribute.fieldInLine>
		<#assign orientation = 'horizontal'>
	<#else>
		<#assign orientation = 'vertical'>
	</#if>
	
	<#if !attribute.mandatory>
		<#if default_values_list?has_content && !hasElement( default_values_list )>
			<#assign checked = true>
		<#else>
			<#assign checked = false>
		</#if>
		<@radioButton name='attribute_${attribute.idAttribute}' value='' checked=checked labelKey='#i18n{portal.users.attribute.labelNone}' orientation=orientation />
	</#if>
	
	<#list attribute.listAttributeFields as attributeField>
		<#if attributeField.title?exists && attributeField.value != "">
			<#if attributeField.defaultValue>
				<#assign checked = true>
			<#else>
				<#assign checked = false>
			</#if>
			<@radioButton name='attribute_${attribute.idAttribute}' value='${attributeField.idField}' checked=checked labelKey='${attributeField.title}' orientation=orientation />
		</#if>
	</#list>
</@formGroup>